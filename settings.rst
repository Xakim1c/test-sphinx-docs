Настройка DEMO приложений
=========================

Вот мы и добрались до создания нашей первой логической цепочки задач. Наш DEMO бизнес-процесс будет выглядеть следующим образом: Пользователь отправляет шутку -> Верификатор проверяет шутку -> Если все хорошо, то бухгалтер выплачивает вознаграждение, для реализации данного бизнес-процесса нам необходимо создать нижеследующие элементы цепочки:

1. Создадим форму для отправки шутки пользователем
2. После отправки шутки пользователем - будем автоматически создавать задачу на "верификацию" шутки
3. Создадим условие "если шутка качественная", тогда создать задачу на выплату вознаграждения
4. Создадим форму для выплаты вознаграждения

1. Giga Turnip Front End
------------------------

Создание новой цепочки
______________________

1. Перейдите к приложению **Giga Turnip Front End**
2. Залогиньтесь через **Log in**
3. Создайте новую Кампанию **Jokes Collector**

.. image:: _static/s_front_campaign.png

4. Откройте созданную Кампанию и нажмите на "коробочку" слева (появится кнопка *Add chain*)

.. image:: _static/s_chain_create.png

5. Создайте новую цепочку задач (*Add chain*)

.. image:: _static/s_chain_add.png

6. Откройте созданную цепочку. C помощью данного интерфейса Вы можете создавать элементы (ноды) 2-х типов: *Форма* (**Stage Node**) и *Условие* (**Logic Node**)

.. image:: _static/s_chain_first_node.png

Начальная форма
_______________

1. Для того чтобы создать *начальную* форму (форма отправки шутки пользователем), введите название формы в поле *Label* (например: *Отправка шутки*) и перетащите на свободное место кнопку **Stage Node**

.. image:: _static/s_chain_start.png

2. Чтобы заполнить созданную форму полями - откройте (нажмите 2 раза) на нод "Отправка шутки"

.. image:: _static/s_chain_stage_open.png

3. В нашей форме нам не хватает 2 поля ввода: "поле куда пользователь впишет шутку" и "поле VISA number" для выплаты вознаграждения. Давайте добавим их

Для добавления нового поля нажмите на "зеленый плюсик". Создайте 2 поля как на скриншоте:

.. image:: _static/s_chain_new_fields.png

4. Установите флажок **Task is creatable** (это значит что пользователь может сам создавать новые задачи на лету). Для сохранения формы нажмите **Submit**

.. image:: _static/s_chains_submit.png

Форма верификации
_________________

1. Создайте новую форму **Stage Node** Label=*Верификация шутки*. Добавьте в него поле "Шутка верифицирована"

.. note::
    соедините созданные формы между собой стрелочкой

.. image:: _static/s_chain_verified_1.png
.. image:: _static/s_chain_verified_2.png

Logic node
__________

1. Создайте новую форму **Logic Node** Label=*Переход к выплате*. Добавьте в него условие как на скриншоте:

.. note::
    соедините созданные формы между собой стрелочкой

.. image:: _static/s_chains_logic_1.png
.. image:: _static/s_chains_logic_2.png

Форма выплаты вознаграждения
____________________________

1. Создайте новую форму **Stage Node** Label=*Выплата вознаграждения*. Добавьте в него поле "Выплачено вознаграждение"

.. note::
    соедините созданные формы между собой стрелочкой

.. image:: _static/s_chain_paid_out_1.png
.. image:: _static/s_chain_paid_out_2.png



2. Giga Turnip
--------------

Чтобы пользователь имел доступ к задачам - необходимо настроить Ranks (ранки)

1. Перейдите к приложению **Giga Turnip** на страницу admin_

.. _admin: http://127.0.0.1:8000/admin/

.. image:: _static/s_admin_start.png

Ranks, Ranks Limit
__________________

1. Создадим новый ранк **collector** (этот ранк мы будем давать пользователям которые собирают шутки). Для этого перейдите в меню **Ranks** и добавьте новый ранк (*Add rank*)

.. image:: _static/s_chain_admin_rank_collector.png

2. Теперь необходимо настроить данный ранк (указать доступы формам и лимиты). Для этого перейдите в меню **Rank limits** и добавьте новый ранк (*Add rank limit*)

Ранк **collector** имеет доступ к форме отправке шутки, укажем это в настройках:

.. image:: _static/s_chain_rank_limits_1.png

3. Аналогично создайте ранки **accounter** и **verifier**, настройки **rank limits** можете посмотреть в скриншотах:

.. image:: _static/s_chain_rank_limits_2.png
.. image:: _static/s_chain_rank_limits_3.png

Rank records
____________

Для того чтобы назначить ранки пользователям, эти пользователи должны зарегистрированы в системе (сделать **Log in** в приложении **Giga Turnip Task View**)

1. Перейдите к приложению **Giga Turnip Task View** и сделайте **Log in** под пользователем который будет у Вас "Сборщиком шуток"
2. Сделайте **Log out** и опять **Log in** под пользователем который будет у Вас "Верификатором шуток"
3. Сделайте **Log out** и опять **Log in** под пользователем который будет у Вас "Бухгалтером"

После данных нехитрых манипуляций в системе **Giga Turnip** появятся данные пользователи. Теперь мы можем назначить каждому пользователю свой *Rank*. Перейдите в меню **Rank records** и назначьте каждому пользователю свой *Rank*

.. image:: _static/s_chain_rank_recrods.png

3. Giga Turnip Task View
------------------------

Ну вот все и готово для тестирования пользовательского интерфейса!

collector
_________

1. Перейдите к приложению **Giga Turnip Task View** и сделайте **Log in** под пользователем который будет у Вас "Сборщиком шуток". После выбора Кампании Jokes Collector у пользователя появится возможность создавать формы для отправки шуток.

.. image:: _static/s_client_collector.png

2. Нажмите на кнопку **create**, заполните поля и отправьте форму на проверку

.. image:: _static/s_client_collector_joke.png

verifier
_________

1. Сделайте **Log in** под пользователем который будет у Вас "Верификатором". После выбора Кампании Jokes Collector на вкладке **ДОСТУПНЫЕ** у пользователя появится возможность верифицировать формы которые были отправлены коллектором.

.. image:: _static/s_chain_verifier_1.png

2. Нажмите на кнопку **open**, Oops! чтобы верифицировать шутку нам не хватает текста шутки из предыдущей формы. Давайте с Вами добавим отображение "предыдущей формы"

.. image:: _static/s_chain_verifier_2.png

3. Перейдите к приложению **Giga Turnip** в меню **Task stages** и для формы *Верификации* укажите *Displayed prev stages*

.. image:: _static/s_chain_verifier_3.png

4. Возвращаемся к приложению **Giga Turnip Task View** проверяем форму верификации. Стало гораздо лучше!

.. image:: _static/s_chain_verifier_4.png

accounter
_________

1. Сделайте **Log in** под пользователем который будет у Вас "Бухгалтером>". После выбора Кампании Jokes Collector на вкладке **ДОСТУПНЫЕ** у пользователя появится возможность подтвердить оплату.

.. image:: _static/s_chain_verifier_1.png

2. Нажмите на кнопку **open**, Oops! чтобы подтвердить нам опять не хватает данных из предыдущих форм (Вы уже умеете решать эту проблему)

.. image:: _static/s_chain_paid.png

Ура! На этом все!
